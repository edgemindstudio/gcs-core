{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GenCyberSynth Evaluation Summary (one-line JSON)",
  "type": "object",
  "required": [
    "timestamp",
    "run_id",
    "model",
    "seed",
    "real_train_dir",
    "val_dir",
    "test_dir",
    "synth_dir",
    "fid_cap_per_class",
    "metrics",
    "deltas"
  ],
  "properties": {
    "timestamp": { "type": "string" },
    "run_id": {
      "type": "string",
      "description": "Unique id per run, e.g., <model>_seed<seed>_YYYYMMDDTHHMMSSZ"
    },
    "model": { "type": "string" },
    "seed": { "type": "integer" },

    "preproc": {
      "type": "string",
      "enum": ["[0,1]", "[-1,1]"],
      "description": "Input scaling convention"
    },
    "splits": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Which splits were used in this run (e.g., [\"train\",\"val\",\"test\"])"
    },

    "real_train_dir": { "type": "string" },
    "val_dir": { "type": "string" },
    "test_dir": { "type": "string" },
    "synth_dir": { "type": "string" },

    "fid_cap_per_class": { "type": "integer" },
    "synth_per_class": {
      "type": "integer",
      "minimum": 1,
      "description": "Target synthetic images per class generated for this run"
    },

    "metrics": {
      "type": "object",
      "required": [
        "fid_macro",
        "cfid_macro",
        "js",
        "kl",
        "diversity",
        "real_only",
        "real_plus_synth"
      ],
      "properties": {
        "fid_macro": { "type": "number" },
        "cfid_macro": { "type": "number" },

        "kid_macro": {
          "type": "number",
          "description": "Kernel Inception Distance computed in domain feature space (optional)"
        },
        "gen_precision": {
          "type": "number",
          "description": "Generative precision in domain feature space (optional)"
        },
        "gen_recall": {
          "type": "number",
          "description": "Generative recall in domain feature space (optional)"
        },
        "ms_ssim": {
          "type": "number",
          "description": "Mean MS-SSIM over pairs of generated samples (diversity proxy; optional)"
        },
        "feature_extractor": {
          "type": "string",
          "description": "Name/path of the frozen domain encoder used for FID/cFID/KID/GenP/R"
        },

        "js": { "type": "number" },
        "kl": { "type": "number" },
        "diversity": { "type": "number" },

        "real_only": {
          "type": "object",
          "required": [
            "accuracy",
            "macro_f1",
            "bal_acc",
            "macro_auprc",
            "recall_at_1pct_fpr",
            "ece",
            "brier"
          ],
          "properties": {
            "accuracy": { "type": "number" },
            "macro_f1": { "type": "number" },
            "bal_acc": { "type": "number" },
            "macro_auprc": { "type": "number" },
            "recall_at_1pct_fpr": { "type": "number" },
            "ece": { "type": "number" },
            "brier": { "type": "number" }
          }
        },

        "real_plus_synth": {
          "type": "object",
          "required": [
            "accuracy",
            "macro_f1",
            "bal_acc",
            "macro_auprc",
            "recall_at_1pct_fpr",
            "ece",
            "brier"
          ],
          "properties": {
            "accuracy": { "type": "number" },
            "macro_f1": { "type": "number" },
            "bal_acc": { "type": "number" },
            "macro_auprc": { "type": "number" },
            "recall_at_1pct_fpr": { "type": "number" },
            "ece": { "type": "number" },
            "brier": { "type": "number" }
          }
        }
      }
    },

    "label_fidelity": {
      "type": "object",
      "description": "How well a frozen classifier recovers labels from generated data",
      "properties": {
        "acc_on_generated": { "type": "number" }
      }
    },

    "memorization": {
      "type": "object",
      "description": "Nearest-neighbor distances from generated to real samples (sanity for memorization)",
      "properties": {
        "nn_dist_mean": { "type": "number" },
        "nn_dist_min": { "type": "number" }
      }
    },

    "deltas": { "type": "object" }
  },
  "additionalProperties": true
}
